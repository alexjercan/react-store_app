{"version":3,"sources":["components/Store.tsx","components/StoreList.tsx","components/Nav.tsx","App.tsx","index.tsx"],"names":["Store","props","useState","show","setShow","className","onClick","event","store","name","coords","latitude","longitude","StoreList","stores","setStores","useEffect","radius","distance","p","q","lat1","lon1","lat2","lon2","φ1","Math","PI","φ2","Δφ","Δλ","a","sin","cos","atan2","sqrt","sort","b","filter","getStoresNearCoords","allStores","map","key","id","Nav","maxRadiusValue","setMaxRadiusValue","setting","setSetting","type","min","max","maxRadius","onChange","setRadius","target","value","pattern","onKeyDown","setMaxRadius","App","setAllStores","setCoords","navigator","geolocation","getCurrentPosition","position","pos","fetch","method","headers","Accept","body","JSON","stringify","data","response","status","json","dataArray","storesArray","storeId","getStores","then","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c14762ee.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Store.css\";\r\nimport \"./Dropdown.css\";\r\n\r\ninterface Props {\r\n  store: TStore;\r\n}\r\n\r\nconst Store: React.FC<Props> = (props) => {\r\n  const [show, setShow] = useState<boolean>(false);\r\n\r\n  const storeClickedHandler = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    setShow(!show);\r\n  };\r\n\r\n  return (\r\n    <li className=\"store\">\r\n      <div className=\"menu\" onClick={storeClickedHandler}>\r\n        {props.store.name}\r\n      </div>\r\n      <ul className={show ? \"dropdown.down\" : \"dropdown\"}>\r\n        <li>{props.store.coords.latitude}</li>\r\n        <li>{props.store.coords.longitude}</li>\r\n      </ul>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Store;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Store from \"./Store\";\r\nimport \"./StoreList.css\";\r\n\r\ninterface Props {\r\n  radius: number;\r\n  allStores: TStore[] | undefined;\r\n  coords: TCoordinates;\r\n}\r\n\r\nconst StoreList: React.FC<Props> = (props) => {\r\n  const [stores, setStores] = useState<TStore[] | undefined>();\r\n\r\n  useEffect(() => {\r\n    const getStoresNearCoords = (\r\n      stores: TStore[] | undefined,\r\n      coords: TCoordinates,\r\n      radius: number\r\n    ) => {\r\n      const distance = (p: TCoordinates, q: TCoordinates) => {\r\n        const lat1 = p.latitude;\r\n        const lon1 = p.longitude;\r\n        const lat2 = q.latitude;\r\n        const lon2 = q.longitude;\r\n        const R = 6371;\r\n        const φ1 = (lat1 * Math.PI) / 180; // φ, λ in radians\r\n        const φ2 = (lat2 * Math.PI) / 180;\r\n        const Δφ = ((lat2 - lat1) * Math.PI) / 180;\r\n        const Δλ = ((lon2 - lon1) * Math.PI) / 180;\r\n        const a =\r\n          Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\r\n          Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\r\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n        const d = R * c;\r\n        return d;\r\n      };\r\n\r\n      return stores\r\n        ?.sort((a: TStore, b: TStore) => {\r\n          return distance(a.coords, coords) - distance(b.coords, coords);\r\n        })\r\n        .filter((store): boolean => {\r\n          return distance(store.coords, coords) <= radius;\r\n        });\r\n    };\r\n\r\n    setStores(getStoresNearCoords(props.allStores, props.coords, props.radius));\r\n  }, [props.radius, props.allStores, props.coords]);\r\n\r\n  return (\r\n    <div>\r\n      <ul className=\"storeList\">\r\n        {stores?.map((store) => (\r\n          <Store key={store.id} store={store} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StoreList;\r\n","import React, { useState } from \"react\";\r\nimport \"./Nav.css\";\r\nimport \"./Dropdown.css\";\r\n\r\ninterface Props {\r\n  radius: number;\r\n  setRadius: React.Dispatch<React.SetStateAction<number>>;\r\n  maxRadius: number;\r\n  setMaxRadius: React.Dispatch<React.SetStateAction<number>>;\r\n}\r\n\r\nconst Nav: React.FC<Props> = (props) => {\r\n  const [maxRadiusValue, setMaxRadiusValue] = useState<number>(100);\r\n  const [setting, setSetting] = useState<boolean>(false);\r\n\r\n  const radiusRangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    props.setRadius(+event.target.value);\r\n  };\r\n\r\n  const maxRadiusTextHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setMaxRadiusValue(+event.target.value);\r\n  };\r\n\r\n  const maxRadiusValidate = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.key === \"Enter\") {\r\n      props.setMaxRadius(maxRadiusValue);\r\n      props.setRadius(Math.min(props.radius, maxRadiusValue));\r\n    }\r\n  };\r\n\r\n  const menuClickedHandler = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    setSetting(!setting);\r\n  };\r\n\r\n  return (\r\n    <div className=\"nav\">\r\n      <h1 className=\"kaufland\">Kaufland Stores</h1>\r\n      <div className=\"menu settings\">\r\n        <div className=\"title\" onClick={menuClickedHandler}>\r\n          Settings\r\n        </div>\r\n        <div className={setting ? \"dropdown\" : \"dropdown.down\"}>\r\n          <div className=\"option\">\r\n            <div className=\"label\">Range</div>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max={props.maxRadius}\r\n              onChange={radiusRangeHandler}\r\n              value={Math.min(props.radius, maxRadiusValue)}\r\n            />\r\n            <div className=\"label\">{props.radius}</div>\r\n          </div>\r\n          <div className=\"option\">\r\n            <div className=\"label\">Max Range</div>\r\n            <input\r\n              className=\"input\"\r\n              type=\"text\"\r\n              pattern=\"[0-9]*\"\r\n              onKeyDown={maxRadiusValidate}\r\n              onChange={maxRadiusTextHandler}\r\n              value={maxRadiusValue}\r\n            />{\" \"}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport ShopList from \"./components/StoreList\";\nimport Nav from \"./components/Nav\";\n\nconst App: React.FC = () => {\n  const [maxRadius, setMaxRadius] = useState<number>(100);\n  const [radius, setRadius] = useState<number>(10);\n  const [allStores, setAllStores] = useState<TStore[] | undefined>();\n  const [coords, setCoords] = useState<TCoordinates>({\n    latitude: 0,\n    longitude: 0,\n  });\n\n  useEffect(() => {\n    const updateLocation = () => {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const pos: TCoordinates = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        };\n\n        setCoords(pos);\n      });\n    };\n\n    updateLocation();\n  }, []);\n\n  useEffect(() => {\n    const getStoresInRange = (radius: number) => {\n      const getStores = async (position: TCoordinates, radius: number) => {\n        const response = await fetch(\"http://localhost:8080/\", {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            data: { position: position, radius: radius },\n          }),\n        });\n\n        if (response.status !== 400) {\n          const dataArray: any[] = await response.json();\n          const storesArray = dataArray.map(\n            (store): TStore => {\n              return {\n                id: store.storeId,\n                name: store.name,\n                coords: {\n                  latitude: store.latitude,\n                  longitude: store.longitude,\n                },\n              };\n            }\n          );\n\n          return storesArray;\n        }\n      };\n\n      getStores(coords, maxRadius).then(setAllStores);\n    };\n\n    getStoresInRange(maxRadius);\n  }, [maxRadius, coords]);\n\n  return (\n    <div className=\"app\">\n      <Nav\n        setRadius={setRadius}\n        radius={radius}\n        maxRadius={maxRadius}\n        setMaxRadius={setMaxRadius}\n      />\n      <ShopList radius={radius} coords={coords} allStores={allStores} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}